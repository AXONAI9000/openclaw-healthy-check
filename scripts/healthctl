#!/usr/bin/env bash
set -euo pipefail

STATE_FILE="${STATE_FILE:-logs/state.json}"
LOG_FILE="${LOG_FILE:-logs/healthd.jsonl}"

cmd="${1:-status}"

case "$cmd" in
  status)
    if [[ -f "$STATE_FILE" ]]; then
      cat "$STATE_FILE"
      echo
    else
      echo "state file not found: $STATE_FILE"
    fi
    ;;
  logs)
    tail -n "${2:-30}" "$LOG_FILE"
    ;;
  *)
    echo "usage: $0 [status|logs [count]]"
    exit 1
    ;;
esac

